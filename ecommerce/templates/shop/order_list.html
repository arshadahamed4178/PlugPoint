{% extends 'shop/base.html' %}

{% block title %}My Orders - Simple Shop{% endblock %}

{% block content %}
<h1>My Orders</h1>


<style>
    .status-badge {
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.9rem;
    }

    .status-completed {
        background-color: #d4edda;
        color: #155724;
    }

    .status-pending {
        background-color: #fff3cd;
        color: #856404;
    }

    .status-cancelled {
        background-color: #f8d7da;
        color: #721c24;
    }

    .status-default {
        background-color: #e2e3e5;
        color: #383d41;
    }
</style>

{% if orders %}
<div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
        <thead>
            <tr style="background-color: #f8f9fa;">
                <th style="text-align: left; padding: 1rem; border-bottom: 2px solid #ddd;">Order ID</th>
                <th style="text-align: left; padding: 1rem; border-bottom: 2px solid #ddd;">Date</th>
                <th style="text-align: left; padding: 1rem; border-bottom: 2px solid #ddd;">Status</th>
                <th style="text-align: right; padding: 1rem; border-bottom: 2px solid #ddd;">Total</th>
                <th style="text-align: center; padding: 1rem; border-bottom: 2px solid #ddd;">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 1rem;">#{{ order.id }}</td>
                <td style="padding: 1rem;">{{ order.created_at|date:"M d, Y" }}</td>
                <td style="padding: 1rem;">
                    <span
                        class="status-badge {% if order.status == 'completed' %}status-completed{% elif order.status == 'pending' %}status-pending{% elif order.status == 'cancelled' %}status-cancelled{% else %}status-default{% endif %}">
                        {{ order.get_status_display }}
                    </span>
                </td>
                <td style="text-align: right; padding: 1rem;">â‚¹{{ order.total_price }}</td>
                <td style="text-align: center; padding: 1rem;">
                    <form action="{% url 'order_detail' order.id %}" method="get">
                        <button type="submit" class="btn">View Details</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>You haven't placed any orders yet.</p>
<form action="{% url 'product_list' %}" method="get">
    <button type="submit" class="btn">Start Shopping</button>
</form>
{% endif %}
{% endblock %}